<HTML>


<HEAD>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script>console.log("there")</script>
    <script src="jquery.js"></script>
    <script type="text/javascript" src="./echarts.js" charset="utf-8"></script>
    <script type="text/javascript" src="./qwebchannel.js"></script>


    <style>
        .container {
            position: relative;
            width: 700px;
            background-color: #EEE9E9;
        }

        .inputfile {
            /* position is static by default */
            border: 1px solid #838B83;
            margin-left: 100px;
            float: left;
            background-color: #EEE9E9;
            width: 200px;
            height: 180px;
            min-width: 100px;
        }

        .setXYZ {
            /* position is static by default */
            border: 1px solid #838B83;
            width: 200px;
            float: left;
            background-color: #FFFAFA;
            height: 180px;
            min-width: 100px;
        }

        .selectItem {
        }

        .button {
            float: right;
            margin-bottom: 10px;
            margin-right: 10px;
        }
    </style>
<TITLE></TITLE>
</HEAD>

<body>
    <div>
        <div id="main" style="float:left;height:450px;width:800px;padding:0px;"></div>
    </div>
    <script type="text/javascript">
        
        var defaultOption = {

            tooltip: {
                trigger: 'item',
                showDelay: 0,
                axisPointer: {
                    show: true,
                    type: 'cross',
                    lineStyle: {
                        type: 'dashed',
                        width: 1
                    }
                },
                zlevel: 1
            },
            toolbox: {
                show: true,
                feature: {
                    mark: { show: true },
                    dataZoom: { show: true },
                    dataView: { show: true, readOnly: false },
                    restore: { show: true },
                    saveAsImage: { show: true }
                }
            },
            legend: {
                left: 'center',
                data: ['实测数据','仿真结果']
            },
            xAxis: {
                type: 'value',
                name: 'ID',
                scale:true,
                axisLabel: {
                    formatter: '{value} '
                }
            },

            yAxis: {
                type: 'value',
                scale:true,
                name: 'RCS/(dbsm)',

            },
            series: [
              {
                  name: '实测数据',
                  type: 'scatter',
                  data: [[1, 1], [2, 2], [3, 3]]
              },
              {
                  name: '仿真结果',
                type: 'scatter',
                data: [[1, 6], [2, 1], [3, 5]]
              },
              //{
              //    name: '仿真结果',
              //     type: 'scatter',
              //    data: [[1, 2], [2, 1], [3, 4]]
              // }
            ]
        };
        //绘制图形边框
        var myChart;
        var content;
        var RSRP = [];
        var Correction = [];
        var before = [];
        function getData(param) {
            for (var i in param) {

                if (param[i].hasOwnProperty("RSRP"));
                {
                    RSRP.push([param[i].ID, param[i].RSRP]);
                }
                if (param[i].hasOwnProperty("Before"))
                {
                   before.push([param[i].ID, param[i].Before]);
                }
                if (param[i].hasOwnProperty("Correction")) {
                    Correction.push([param[i].ID, param[i].Correction]);
                }
            }

            var tmpseries = [
                {
                  name: '实测数据',
                  type: 'scatter',
                  large: true,
                  animation: true,
                  animationDuration: 1000,
                  animationDelay: function (idx) {
                      return idx [0]* 10;
                  },
                  symbolSize: 6,
                  data: RSRP
                },
                {
                  name: '仿真结果',
                  type: 'scatter',
                  large: true,
                  animation: true, 
                  animationDuration: 500,
                  animationDelay: function (idx) {
                      return idx * 10 + 10;
                  },
                  symbolSize: 6,
                  data: Correction
                },
                //{
                //    name: '仿真结果',
                //    type: 'scatter',
                //    large: true,
                //    animation: true,
                //    animationDuration: 1000,
                //    animationDelay: function (idx) {
                //        return idx[0] * 10;
                //    },
                //    symbolSize: 6,
                //    data: before
                //},
            ];
            defaultOption.series=tmpseries;
            myChart.setOption(defaultOption,true);         
        }

                myChart = echarts.init(document.getElementById('main'));
                myChart.clear();
                myChart.setOption(defaultOption);
                window.onresize = myChart.resize;
                window.onload = function() {
                    new QWebChannel(qt.webChannelTransport, function(channel) {
                        // make dialog object accessible globally
                        var content = channel.objects.content;
                        content.sendText.connect(getData);
                    });
                }
    </script>
</body>


</HTML>
